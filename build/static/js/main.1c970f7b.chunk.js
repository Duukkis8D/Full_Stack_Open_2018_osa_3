(this.webpackJsonposa_3_puhelinluettelo_frontend=this.webpackJsonposa_3_puhelinluettelo_frontend||[]).push([[0],{37:function(e,t,s){},38:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s(2),i=s.n(a),h=s(13),r=s.n(h);var o=e=>{const t=e.showAll?e.persons:e.persons.filter((t=>t.name.toUpperCase().includes(e.search.toUpperCase())));return Object(n.jsx)("div",{id:"personsListContainer",children:Object(n.jsxs)("table",{children:[Object(n.jsx)("thead",{}),Object(n.jsx)("tbody",{children:t.map((t=>Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.name},t.name),Object(n.jsx)("td",{children:t.phone},t.phone),Object(n.jsx)("td",{children:Object(n.jsx)("button",{onClick:e.removePerson(t.id,t.name),children:"Poista"})})]},t.name)))})]})})};var c=e=>Object(n.jsxs)("div",{id:"filterContainer",children:[Object(n.jsx)("label",{children:"Kirjoita hakusana"}),Object(n.jsx)("input",{value:e.search,onChange:e.handleSearch})]});var l=e=>Object(n.jsxs)("div",{id:"addPersonContainer",children:[Object(n.jsx)("label",{children:"Nimi"}),Object(n.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(n.jsx)("label",{children:"Numero"}),Object(n.jsx)("input",{value:e.newPhoneNumber,onChange:e.handlePhoneNumberChange}),Object(n.jsx)("button",{type:"submit",children:"Lis\xe4\xe4 tiedot"})]});var d=e=>""===e.message?Object(n.jsx)("div",{id:"notificationEmpty"}):Object(n.jsx)("div",{id:"notification",children:e.message}),j=s(3),m=s.n(j);const b="/api/persons";var u=()=>m.a.get(b).then((e=>e.data)),p=e=>m.a.post(b,e).then((e=>e.data)),v=e=>{m.a.delete("".concat(b,"/").concat(e))};s(37);class x extends i.a.Component{constructor(e){super(e),this.addPerson=e=>{e.preventDefault();let t=!1;this.state.persons.forEach((function(s){s.name!==e.target[0].value&&s.phone!==e.target[1].value||(t=!0)})),!1===t&&(this.addPersonToServer(e),this.setState({message:"Lis\xe4ttiin ".concat(e.target[0].value)}),setTimeout((()=>{this.setState({message:""})}),5e3))},this.addPersonToServer=e=>{const t={name:e.target[0].value,phone:e.target[1].value};p(t).then((e=>{this.setState({persons:this.state.persons.concat(e),newName:"",newPhoneNumber:""})}))},this.removePerson=(e,t)=>()=>{window.confirm("Poistetaanko ".concat(t," ?"))&&(v(e),this.setState({persons:this.state.persons.filter((t=>t.id!==e)),message:"Poistettiin ".concat(t)}),setTimeout((()=>{this.setState({message:""})}),5e3))},this.handleNameChange=e=>{this.setState({newName:e.target.value})},this.handlePhoneNumberChange=e=>{this.setState({newPhoneNumber:e.target.value})},this.handleSearch=e=>{this.setState({search:e.target.value,showAll:!1}),""===e.target.value&&this.setState({showAll:!0})},this.state={persons:[],newName:"",newPhoneNumber:"",search:"",showAll:!0,message:""}}componentDidMount(){u().then((e=>{this.setState({persons:e})}))}render(){return Object(n.jsxs)("div",{id:"appContainer",children:[Object(n.jsx)("h1",{children:"Puhelinluettelo"}),Object(n.jsx)(d,{message:this.state.message}),Object(n.jsx)("h2",{id:"addPersonHeadline",children:"Lis\xe4\xe4 uusi henkil\xf6"}),Object(n.jsx)("form",{id:"addPersonForm",onSubmit:this.addPerson,children:Object(n.jsx)(l,{newName:this.state.newName,newPhoneNumber:this.state.newPhoneNumber,handleNameChange:this.handleNameChange,handlePhoneNumberChange:this.handlePhoneNumberChange})}),Object(n.jsx)("h2",{id:"filterHeadline",children:"Rajaa n\xe4ytett\xe4vi\xe4"}),Object(n.jsx)(c,{search:this.state.search,handleSearch:this.handleSearch}),Object(n.jsx)("h2",{id:"personsListHeadline",children:"Henkil\xf6t"}),Object(n.jsx)(o,{persons:this.state.persons,showAll:this.state.showAll,search:this.state.search,removePerson:this.removePerson}),Object(n.jsxs)("div",{id:"fontInfo",children:["Font made from ",Object(n.jsx)("a",{href:"http://www.onlinewebfonts.com",children:"oNline Web Fonts"})," is licensed by CC BY 3.0"]})]})}}var O=x;r.a.render(Object(n.jsx)(O,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.1c970f7b.chunk.js.map